---
aliases:
  - 011 트랜잭션의 개요
tags:
  - Transaction
  - DB
author: Min Jo
created: 2025-04-26
---

# 트랜잭션의 개요 
---

서비스 운영하면서 DB 성능 저하 이슈가 발생하면, 특정 쿼리만 골라서 성능을 개선하였다.
하지만 이러한 경우 다수의 쿼리가 동시에 실행되거나, 중간에 실패하였을 때 데이터가 꼬이는 현상이 발생하면서 성능 최적화 뿐만 아니라 트랜잭션 자체의 이해가 더 중요한 문제임을 깨달았다.

이 글을 통해 트랜잭션의 개념을 깊이있게 이해하고자 한다.

---

흔히 DB를 사용한다면 트랜잭션과 트랜잭션의 특징(ACID)를 간단하게 알고있겠지만 
깊이 있게 트랜잭션을 이해하고 쿼리를 작성하지는 않는다고 생각한다.

트랜잭션을 깊이 있게 이해하면 동시성 제어와 (~~동시성 제어말고 또 다른 뭔가가 있는지 궁금하네. 있다면 다른 대표적으로 다룰 수 있는거를 적어줘 !! 여기에 또 다른게 있나 궁금하네 )  ~ ~~)
다룰 수 있기에, 이해하고자 한다. 동시에 개발자 관점에서 이기때문에 실습까지 진행하며 확인하고자 한다.  (기본적으로 DDL, DML, DCL 명령어를 사용해보고 개념을 알고있다는 전제로 작성한다.)

---

### 트랜잭션 

트랜잭션 → DB의 상태를 변경시키는 작업의 단위 
한 꺼번에 수행되어야할 연산을 모아둔다.
연산들이 모두 처리하지 못한 경우에는 원 상태로 복구되며, 작업의 일부만 적용되지 않는다. 
이를 통해 트랜잭션의 작업의 **완정성**을 보장해준다.

---

나는 공부하기전에 SELECT 는 하나의 Transaction이라고 생각하지 않았고 , `COMMIT`, `ROLLBACK` 을 실행하여야 트랜잭션의 종료가 이루어지는줄 알았다. 
하지만 대부분의 DBMS에서는 읽기 전용(READ ONLY) 트랜잭션으로 간주되고, 자동 커밋(auto-commit) 된다  이말은 
→ DB는 `SELECT` 실행을 위해 내부적으로 트랜잭션을 시작하고,  
→ 쿼리가 정상적으로 끝나면 바로 **자동으로 커밋**해서 끝낸다.


#### user 테이블을 조회하는 경우 

```sql
SELECT * FROM user; 
```


#### user 테이블을 조회할 때 내부적으로 일어나는 것 

```sql 
BEGIN;
SELECT * FROM user;
COMMIT;
```


----

✅ 트랜잭션 정리 요약
- `COMMIT`, `Rollback `
  → 사용자의 입장에서 트랜잭션을 직접 다루는 단위
- `SELECT
  →`대부분의 DB에서 Auto Commit으로 설정되어, 내부적으로 트랜잭션을 시작하고 바로 종료된다. 
- `INSERT`, `UPDATE`, `DELETE` 
   → Auto commit 모드에서는 자동으로 트랜잭션이 종료된다.
   → 수동 트랜잭션 모드에서는 명시적인  `COMMIT`, `ROLLBACK` 이 필요하다.
---


