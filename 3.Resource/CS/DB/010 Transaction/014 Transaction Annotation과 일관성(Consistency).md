---
aliases:
  - 014 Transaction Annotationê³¼ ì¼ê´€ì„±(Consistency)
tags:
  - Transaction
  - DB
author: Min Jo
created: 2025-04-26
---
# Transaction Annotationê³¼ ì¼ê´€ì„±(Consistency)
---

Transactionì˜ íŠ¹ì„±ì¤‘ C(Consistency)ë¥¼ ê³µë¶€í•˜ëŠ” ë„ì¤‘ Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´ 
ë‹¨ìˆœíˆ DBì—ì„œë¿ë§Œì•„ë‹ˆë¼ ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§ê³¼ì˜ ì—°ê²°ì„ ì´ìš©í•˜ì—¬ í•˜ë‚˜ì˜ ë©”ì†Œë“œë¥¼ íŠ¸ëœì­ì…˜ì˜ ë‹¨ìœ„ë¡œ ë³¸ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆë‹¤.

---
### 1.@Transactional

```java
# ê°œë°œì ì…ì¥ì—ì„œ ë³¼ë•Œì˜ Transactionì˜ ë‹¨ìœ„ë¥¼ ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤.

@Transactional 
public void saveService(MyServiceDTO dto) {
		if(dto.size() < 0) {
			throw new IllegalArgumentException("ì•„ë¬´ê²ƒë„ ì¡´ì¬í•˜ì§€ ì•ŠìŒ");
		}
		
		save(dto);
	}


saveServiceë¼ëŠ” ë©”ì†Œë“œë¥¼ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì—¬ê¸°ë©°, 

```

ë”ìš± ìƒì„¸í•˜ë©´ ì„¤ëª…í•˜ìë©´
- ì½”ë“œ ìƒì—ì„œ ì—ëŸ¬(Exception)ì´ ë°œìƒí•˜ê±°ë‚˜ 
- DBì‘ì—…(ì¿¼ë¦¬)ê°€ ì‹¤íŒ¨í•˜ë©´ íŠ¸ëœì­ì…˜ì€ `ROLLBACK` ëœë‹¤.
- ëª¨ë“  ì½”ë“œì™€ DB ì¿¼ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì—¬ì•¼ íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹(Commit) ëœë‹¤.


#### ğŸš¨  ì¡°ì‹¬í•  ì 

- **ëŸ°íƒ€ì„ ì˜ˆì™¸(RunTimeException)ê°€** ë°œìƒí•˜ë©´ íŠ¸ëœì­ì…˜ì€ ìë™ìœ¼ë¡œ `ROLLBACK`
- **ì²´í¬ ì˜ˆì™¸(Exception)ì€** ìë™ìœ¼ë¡œ `ROLLBACK`ë˜ì§€ ì•ŠìŒ
  â†’ í•„ìš”í•˜ë©´ `@Transactional(rollbackFor = Exception.class)` ì´ë ‡ê²Œ ì„¤ì •
- **DB ë ˆë²¨ ì—ëŸ¬**(ex. ì œì•½ì¡°ê±´ ìœ„ë°˜, Deadlock ë“±)ê°€ ë°œìƒí•˜ë©´ â†’ ì—­ì‹œ ë¡¤ë°±ë¼.






`rollbackFor`, `propagation`, `isolation` ê°™ì€ ê³ ê¸‰ ì˜µì…˜ë„ ì•Œë ¤ì¤„ê²Œ. (íŠ¸ëœì­ì…˜ ì§„ì§œ ì œëŒ€ë¡œ ì“°ë ¤ë©´ ì´ê²ƒë“¤ë„ ì•Œì•„ì•¼ í•˜ê±°ë“ !)


---



### 2.@Transactional ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ìƒí™© 


| insert, update, delete | ì“°ê¸°ì‘ì—… | ë¬´ì¡°ê±´ í•„ìš”                                          |
| ---------------------- | ---- | ----------------------------------------------- |
| ë³µì¡í•œ select             |      | ìƒí™©ì— ë”°ë¼ í•„ìš”(ì—¬ëŸ¬ í…Œì´ë¸” join, ì¡°íšŒ ì¤‘ê°„ì— ìƒíƒœê°€ ë³€í•  ìœ„í—˜ì´ ìˆëŠ” ê²½ìš°) |
| select                 |      |                                                 |
