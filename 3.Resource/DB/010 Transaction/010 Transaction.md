---
aliases:
  - 010 Transaction
tags:
  - DB
  - Transaction
author: Min Jo
created: 2025-04-26
---

# 010 Transaction 
----

> 개요: 서비스를 운영하면서 DB 성능 저하 이슈가 빈번히 발생했다. 그때마다 특정 쿼리만 골라 성능을 개선하는 방식으로 문제를 해결해왔지만, 시간이 지날수록 한계가 느껴졌다. 특히, 다수의 쿼리가 동시에 실행되거나, 중간에 실패했을 때 데이터가 꼬이는 현상을 겪으면서, 단순한 쿼리 튜닝이 아니라 **트랜잭션 자체의 이해가 더 중요한 문제**임을 깨달았다.  
> 이제는 DB 설계나 쿼리를 작성하는 초기 단계부터 **트랜잭션 관점에서의 설계**가 필요하다는 생각이 들었고, 이 글을 통해 트랜잭션의 개념, 동작 방식, 그리고 이를 고려한 쿼리/설계 전략까지 깊이 있게 정리해보고자 한다.

---

흔히 DB를 사용한다면 트랜잭션과 트랜잭션의 특징(ACID)를 간단하게 알고있겠지만 
깊이 있게 트랜잭션을 이해하고 쿼리를 작성하지는 않는다고 생각한다.

트랜잭션을 깊이 있게 이해하면 동시성 제어와 (~~동시성 제어말고 또 다른 뭔가가 있는지 궁금하네. 있다면 다른 대표적으로 다룰 수 있는거를 적어줘 !! 여기에 또 다른게 있나 궁금하네 )  ~ ~~)
다룰 수 있기에, 이해하고자 한다. 동시에 개발자 관점에서 이기때문에 실습까지 진행하며 확인하고자 한다.  (기본적으로 DDL, DML, DCL 명령어를 사용해보고 개념을 알고있다는 전제로 작성한다.)

---

### 트랜잭션 

트랜잭션 = DB의 상태를 변경시키는 작업의 단위 
한 꺼번에 수행되어야할 연산을 모아둔다.

연산들이 모두 처리하지 못한 경우에는 원 상태로 복구되며, 
작업의 일부만 적용되지 않는다(A- Atomity(원자성))
이를 통해 트랜잭션의 작업의 **완정성**을 보장해준다.


나는 공부하기전에 SELECT 는 하나의 Trnasaction이라고 생각하지 않았지만, 트랜잭션을 공부하기 시작한 이후  user 테이블을 조회한다는 가정하에 


```sql
SELECT * FROM user; 
```

```sql 
BEGIN;
SELECT * FROM user;
COMMIT;
```


대부분의 DBMS에서는 읽기 전용(READ ONLY) 트랜잭션으로 간주되고, 자동 커밋(auto-commit) 됩니다.  이말은 
→ DB는 `SELECT` 실행을 위해 내부적으로 트랜잭션을 시작하고,  
→ 쿼리가 정상적으로 끝나면 바로 **자동으로 커밋**해서 끝내버립니다.



----

✅ 트랜잭션 정리 요약
- `COMMIT`, `Rollback `
  → 사용자의 입장에서 트랜잭션을 직접 다루는 단위
- `SELECT
  →`대부분의 DB에서 Auto Commit으로 설정되어, 내부적으로 트랜잭션을 시작하고 바로 종료된다. 
- `INSERT`, `UPDATE`, `DELETE` 
   → Auto commit 모드에서는 자동으로 트랜잭션이 종료된다.
   → 수동 트랜잭션 모드에서는 명시적인  `COMMIT`, `ROLLBACK` 이 필요하다.
---

