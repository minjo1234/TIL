

블로그경로 : https://velog.io/@pinion7/macOs-m1-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-kubernetes-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0

맥에서 root 계정으로 변경 : sudo -s 

하이버파이저
노드
파드
클러스터

———————

하이버파이저(Hypervisor) : 하나의 시스템 상에서 가상 컴퓨터를 여러개 구동할 수 있도록 해주는 계층
쿠버네티스 클러스터

쿠버네티스를 배포하면 클러스터를 얻는다. 즉, 쿠버네티스를 실행 중이라는 건 클러스터를 실행하고 있다는 이야기이다.
쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합이다.

----

노드 : 클러스터 내 가상 서버, 컴퓨팅 엔진단위이다.
클러스터 다음으로 큰 단위이며, 마스터 노드와 워크 노드로 분리되어있다.

마스터 노드 : 전체 쿠버네티스 시스템을 관리하고 통제한다.
워커 노드: 배포하고자 하는 어플리케이션의 실제 실행을 수행한다.
마스터 노드가 죽으면 클러스터를 관리할 노드가 없기에,  일반적으로 3개 정도의 마스터 노드를 띄워 관리한다 

 ---

파드란, 쿠버네티스에서 생성하고 관리할 수 있는 배포 가능한 가장 작은 컴퓨터 단위다.
하나 이상의 컨테이너 그룹을 뜻한다.
컨테이너는 애플리케이션을 말한다. 어플리케이션의 일부 기능일 수도 있고 
완전한 어플리케이션 그 자체일수도있다.

만약 컨테이너가 완전한 어플리케이션의 일부 기능이라면?

- 여러 개의 컨테이너들이 모여 하나의 완전한 어플리케이션을 구성할 것이다.
- 이때 여러 개의 컨테이너가 모여 하나의 파드가 된다. ( 그럼 이 파드가 완전한 어플리케이션이 된다.)

---

쿠버네티스 환경의 모티러이 단위는 기본이 파드
쿠버네티스의 크기 단위는

클러스터 > 노드 > 파드 > 컨테이너

 ------

### 오케스트레이션

기존의 개발 : 하나의 통일체
현재의 개발 : 애플리케이션이 설계된 기능대로 수십, 수백개의 느슨하게 결합된 컨테이너로 구성

그리하여 컨테이너를 끊임없이 관리하는 일을 요구하는데

오케스트레이션 : 컨테이너화된 애플리케이션의 자동화 및 최적화

쿠버네티스 : 컨테이너 오케스트레이션 도구 ( 컨테이너화된 애플레케이션을 관리하는 도구 )


kubectl : 쿠버네티스 컨트롤

docker-compose : 멀티 컨테이너 상황에서 통신을 구축하는 명령어
도커 컨테이너는 기본적으로 독립적인 영역을 가졌기 때문에
하나의 컨테이너가 다른 컨테이너를 참조하거나 연결하려고 할 경우에 오류가 발생할 수 있다.
docker-compose는 멀티 컨테이너를 감싸서 컨테이너 간의 통신이 가능하도록 설정해준다.

30000:80 포트로 매핑 

외부에서 30000 포트로 접속할경우
내부에서 80으로 호출해준다.


kubectl apply -f 
kubectl get all : pod, service, deployment, replicaset을 모두 확인할 수 있다.

{로컬 포트}:{서비스 포트}
{외부 노출 ip 주소}:{오픈된 NodePort}


----------

### docker,  docker-compose, kubernetes 구조분석

docker : 구조가 간단, docker의 기본 단위는 컨테이너 
docker-compose.yml : 하나의 service 안에 컨테이너가 모두 포함되어 있다. 
kubernetes : 기본 단위는 컨테이너가 아닌 클러스이다.
클러스터는 최소 1개 이상의 노드로 구성이 되고, 
노드에 띄워지는 워크로드를 구성하는 요소들을 오브젝트라고 칭한다.
워크로드에는 Deployment & Service 리소스로 만든 오브젝트가 존재한다.
또 그 안에는 메타테이너, 컨테이너, 환경변수, 포트등이 명시되어 있다.

-----

### 명령어 정리 (pod, service, deployment, replicaset )

apply : 원하는 상태 적용
get : 리소스 리스트 조회
describe : 리스트 상태 상세 조회
delete : 리소스 제거 
logs : 컨테이너 로그 조회 
exec : 컨테이너에 명령어 전달 (주로 컨테이너 접근 시 사용)
config : kubectl 설정관리 

---

